```undefined

Agent：是衡量大语言模型“从量变到质变”的关键，是针对特定场景的AI解决方案。在不少互联网厂商内部，智能客服都是他们最先尝试的企业级Agent项目。
AG：主要应用在那些需要不断更新知识的密集场景或特定领域，它最大的优势就是不需要针对特定任务重新训练大语言模型。
Function Call：是指运行一段具有特定功能的代码块的行为，以增强其处理能力，实现更复杂的任务，使大模型能够集成外部工具和资源，提升交互性和实用性。
```

Hugging Face: 相当于大模型界的github

由想法到原因再到行动，到反馈，再到想法和原因到行动的反馈循环，就是人能处理问题的关键，

# Langchain核心组件

一是粘合大模型，二是提供开发框架工具，做大模型和应用之间的粘合剂

LangChain 的核心组件围绕 “连接大模型与外部资源、构建端到端 AI 应用” 的目标设计，主要包括以下 7 大核心模块，每个模块都有明确的功能定位和应用场景：

### 1. **模型（Models）**

- **功能**：封装各类大语言模型（LLM）、聊天模型（Chat Models）、文本嵌入模型（Embeddings）等，提供统一调用接口。
- **作用**：无需关注不同模型的 API 差异，通过 LangChain 即可调用 OpenAI、GPT-4、Anthropic、百度文心等主流模型。
- **示例**：用 `ChatOpenAI` 类调用 OpenAI 的聊天接口，用 `HuggingFaceEmbeddings` 调用开源嵌入模型。

### 2. **提示词（Prompts）**

- **功能**：管理提示词模板、格式化输入、支持动态参数注入。
- **作用**：将固定提示词结构与动态变量分离，提升提示词复用性和维护效率。
- **示例**：定义一个客服回复模板 `PromptTemplate(input_variables=["user_query"], template="用户问：{user_query}，请友好回复")`，动态传入用户问题生成最终提示词。

### 3. **链（Chains）**

- **功能**：将 “提示词→模型调用→结果处理” 的步骤串联成可复用的流程，支持多步骤协作。
- **作用**：解决单一模型调用无法完成复杂任务的问题（如 “检索资料→生成报告”）。
- **示例**：`LLMChain` 组合提示词和模型，`SequentialChain` 按顺序执行多个链，`RouterChain` 根据输入动态选择执行逻辑。

### 4. **检索器（Retrievers）**

- **功能**：连接外部数据源（文档、数据库等），实现 “检索增强生成（RAG）”。
- **作用**：让大模型结合最新 / 私有数据生成回答，解决预训练知识陈旧或局限问题。
- **示例**：用 `VectorstoreRetriever` 从向量数据库（如 Chroma、Pinecone）中检索与问题相关的文档片段，再交给模型生成答案。

### 5. **智能体（Agents）**

- **功能**：让大模型自主决策 “调用哪些工具、按什么顺序执行”，处理需要多步推理的复杂任务。
- **作用**：赋予 AI 类人的问题解决能力，支持调用计算器、搜索引擎、数据库等外部工具。
- **示例**：`AgentType.ZERO_SHOT_REACT_DESCRIPTION` 类型的智能体，通过 “思考→行动→观察” 循环完成 “查询股票价格并计算涨幅” 的任务。

### 6. **记忆（Memory）**

- **功能**：保存和管理智能体 / 链的上下文状态，支持多轮对话或任务的历史信息复用。
- **作用**：让 AI 具备 “记忆” 能力，避免重复输入历史信息（如多轮聊天中记得前文内容）。
- **示例**：`ConversationBufferMemory` 保存完整对话历史，`ConversationSummaryMemory` 对历史对话进行摘要压缩，节省 tokens。

### 7. **工具（Tools）**

- **功能**：定义智能体可调用的外部功能（如 API、函数、应用等）。
- **作用**：扩展大模型的能力边界，使其能与外部系统交互（如查天气、操作数据库、发送邮件）。
- **示例**：`SerpAPIWrapper` 调用搜索引擎，`PythonREPLTool` 执行 Python 代码，`SQLDatabaseToolkit` 操作数据库。

### 组件间的协作关系

这些组件通常按 “**输入→处理→输出**” 的逻辑协同工作：

1. 用 `Prompts` 定义任务模板；
2. 用 `Models` 调用大模型处理提示词；
3. 复杂任务通过 `Chains` 串联多步操作；
4. 需要外部数据时，用 `Retrievers` 检索并结合 `Models` 生成结果；
5. 多轮交互依赖 `Memory` 保存上下文；
6. 超复杂任务（如自主决策）由 `Agents` 调用 `Tools` 完成。

这种模块化设计让 LangChain 既能快速搭建简单应用，也能扩展到企业级复杂 AI 系统。



langchain0.1主要就是把架子搭起来，api变化，遗弃，老的东西跑不通，

langgraph也是langchain推出的脚手架，给agent添加了状态机，让它变成workflow工作流，比较适合大型的，复杂的agent开发，单agent可以使用langchain来做，一旦涉及到持久化，状态的检测等等就比较复杂，langgraph就是解决这类问题的，

langgraph支持多个agent协同工作，

通过RAG提升模型的专业知识，通过chain提升模型的工具能力，

对于客户来说就是比较低的成本雇佣了一个团队出来，这也是agent未来的发展场景和目标，


大模型加载文件：

```undefined
from langchain_community.document_loaders import BSHTMLLoader
loader = BSHTMLLoader("test.html", open_encoding='utf-8')
data = loader.load()
print(data)
```


# MCP

AI模型想要调用外部的资源和服务，则需要function calling来传递消息：

在2024年流行的各种智能体（Agent），就是基于Funcation calling技术实现的

function calling并没有统一的规范，同一个Agent往往需要访问数据库、网络、文件、应用等等不同的资源，不同开发者所开发的function call彼此又并不兼容，这使得Agent开发的成本非常高。

如何避免这种低效的重复发明轮子的现象呢？在2024年末，AI模型Claude所属的研发公司Anthropic提出了一项开源协议，名为MCP协议（Model Context Protocol）。

这项协议通过客户端-服务器架构与JSON-RPC 2.0等标准通信协议，实现了大型语言模型与外部数据源、工具的无缝集成。

协议：不同主体间交互的统一标准

[https://github.com/modelcontextprotocol/servers](https://github.com/modelcontextprotocol/servers)



























## 一、AI Agent 学习现状与痛点

1. **学习资源不足且质量参差不齐**

    - 中文资料匮乏，教学类视频、实战教程数量少。
    - 网上资料分散，缺乏系统总结，知识体系零散。
    - 内容深度不足，多侧重工具使用讲解，编码（coding）相关内容少，原理与实践结合的资料稀缺。
2. **AI Agent 开发核心目标**：
3. 开发具备 “耳（语音交互）、
4. 嘴（文本 / 语音输出）、
5. 脑（知识学习与推理）、
6. 情感（人性化交互）” 的智能体，
7. 如 “灵师傅（Master Ling）”，需实现自然语言交互（文本、语音）、知识学习、实时感知、记忆、API 嵌入 IM、可扩展性、鲜明个性等功能。

## 二、LangChain 相关核心内容

### （一）LangChain 定位与核心价值

1. **核心定位**：大模型与应用之间的 “粘合剂”，解决多模型接入难题，内置大量模型支持，避免逐一适配不同大模型 API 的繁琐工作。
2. **核心价值**

    - 粘合多类大模型，提供统一接口，降低多模型协作门槛。
    - 提供完整开发框架工具，支持企业级 AI Agent 开发，弥补 OpenAI 官方 Agent 工具颗粒度粗、文件 / 数据量限制大、难实现细致控制的不足（OpenAI 更适合应用级开发，LangChain 适配企业级需求）。
    - 支持多模态开发，可串联文本、图像等不同类型大模型，实现模型间通讯。
    - 允许开发者通过代码在低维度实现项目精细操控，比自然语言生成的结果更精准、自由度更高。

### （二）LangChain 核心功能与组件

| 功能模块                                       | 具体作用                                                                                                          |
| ------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------- |
| LLMs & Prompt                                  | 提供主流 LLM 通用接口，支持提示词管理（版本管理、共享）与优化，提升开发效率，可加载提示链便于协作                 |
| Chains                                         | 将提示词、大模型、结果解析封装成 Chain，提供标准接口，支持多 Chain 形成交互序列，实现端到端 AI 原生应用开发       |
| Retrieval Augmented Generation（检索增强生成） | 解决预训练语料陈旧问题，先与外部数据源交互获取最新数据，再结合 LLM 生成内容，适用于特定数据源问答机器人等场景     |
| Agent                                          | 提供标准接口与示例，支持 LLM 拆分任务、执行行动、观察结果，重复流程直至任务完成，核心是让大模型操作外部系统与工具 |
| Memory                                         | 实现 Chain/Agent 调用间的状态持久化，提供标准接口与多种实现方案                                                   |
| Evaluation                                     | 提供丰富评估能力，方便对 LLMs 效果进行评估                                                                        |

### （三）LangChain 版本与生态扩展

1. **版本特点**：LangChain 0.1 以搭建基础框架为主，存在 API 变化、旧功能遗弃等情况，部分老代码可能无法运行。
2. **生态扩展工具 ——LangGraph**

    - 定位：LangChain 推出的脚手架，为 Agent 添加状态机，支持 Workflow 工作流。
    - 适用场景：大型、复杂 Agent 开发，多 Agent 协同工作；解决单 Agent 在持久化、状态检测等场景下的复杂性问题。

### （四）安装与官方资源

1. **安装命令**

    - pip 安装：`pip install langchain`；升级命令：`pip install --upgrade langchain -i https://pypi.org/simple`
    - conda 安装：`conda install langchain -c conda-forge`
2. **官方资源**

    - 官网：[https://python.langchain.com](https://python.langchain.com/)
    - GitHub 地址：[https://github.com/langchain-ai/langchain](https://github.com/langchain-ai/langchain)

## 三、AI Agent 开发相关技术与工具

1. **核心技术栈**

    - API 层开发：Python/FastAPI
    - LLM+BOT 开发：OpenAI/Ollama/ 百度 / ChatGLM 等大模型 + LangChain + Telegram
    - 语音功能：AI for TTS（语音合成）
    - 记忆与学习：Vector（向量存储）+ Database（如 Redis、Qdrant）
    - 辅助工具：Jupyter（安装命令`pip install jupyterlab`，启动命令`jupyter-lab`，也可通过 VS Code 插件启动）、LangSmith、LangServe
2. **关键概念 ——RAG（检索增强生成）**

    - 原理：先从外部数据源获取信息，再结合 LLM 生成内容，解决预训练数据陈旧导致的回答过时问题。
    - 应用：PDF 解析等场景多基于 LangChain 实现 RAG 功能。

## 四、大模型与 AI 应用发展趋势